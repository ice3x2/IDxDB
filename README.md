# IDxDB
## 구현 목적
 * **기존 구성의 한계**
   * 개인 프로젝트에 사용하는 MongoDB에 3000여개의 컬렉션을 사용. 가장 큰 컬렉션 하나는 1800만개의 로우를 갖고 있으며 가장 작은 컬렉션도 60만개를 갖고있다. 모든 도큐먼트는 하나의 컬럼에만 인덱스가 걸려있으며, 상위 250만개의 로우는 모두 redis에 캐쉬되어 빠르게 사용할 수 있다. 하지만 리스트를 가져오는 속도가 만족스럽지 못하고, 시스템 자원 사용 빈도도 원하는 것보다 높다.
   * 인덱스를 통한 검색과 업데이트는 매우 빈번하게 일어나지만, 삭제는 거의 발생하지 않으며 삽입또한 많이 발생하지 않는다.(일 20000건 이하)
 * 따라서 프로젝트에 최적화된 아주 간단한 DB를 구현하게 되었다.
## 기능
  * 별 기능 없는 초 간단 DB
  * 데이터는 json형식을 사용하며 저장할 때는 바이너리 형태로 기록됨.
  * 지정된 개수의 상위 데이터를 메모리에 캐쉬한다.
  * 단 하나의 인덱스. 중복을 허용하지 않음.
  * 자바의 TreeSet과 LinkedHashMap을 사용하여 인덱싱.
  * 아직 인덱스외의 값을 이용한 검색을 지원하지않음.
  * json형식의 간단한 쿼리를 지원. 하지만 서버와 인증은 지원하지 않음.
## 사용법
  * DB생성

    ```java
    File file = new File("yes.db");
    IdxDB idxDB = IdxDB.newMaker(file).make();
    ```

   * 컬렉션 생성
     ```java
     IndexSet set = 
     idxDB.newIndexSetBuilder("D_DATA")
     .index("dateL", 1)
     .memCacheSize(1000)
     .create();
      ```
